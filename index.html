<!DOCTYPE html>
<html lang="pl">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="theme-color" content="#000000">
  <title>Warriors App</title>

  <!-- üîπ Manifest -->
  <link rel="manifest" href="manifest.json">

  <style>
    body {
      font-family: Arial, sans-serif;
      background-color: #000;
      color: #fff;
      text-align: center;
      margin: 0;
      padding: 40px 10px;
    }
    .login-box {
      margin-top: 30px;
    }
    input {
      display: block;
      margin: 10px auto;
      padding: 10px;
      width: 220px;
      border-radius: 6px;
      border: none;
    }
    button {
      padding: 10px 20px;
      border: none;
      border-radius: 6px;
      background: red;
      color: #fff;
      font-size: 16px;
      cursor: pointer;
    }
    .logo {
      width: 180px;
      margin-bottom: 20px;
    }
  </style>

  <script>
    // üîß Service Worker
    if ('serviceWorker' in navigator) {
      navigator.serviceWorker.register('service-worker.js')
        .then(() => console.log('‚úÖ Service Worker OK'))
        .catch(err => console.error('‚ùå SW error', err));
    }
  </script>
</head>
<body>

  <img src="https://i.imgur.com/41PSyW5.jpeg" alt="Warriors Logo" class="logo">
  <h1>Logowanie Warriors</h1>

  <div class="login-box">
    <input id="numer" type="number" placeholder="Numer zawodnika">
    <input id="haslo" type="password" placeholder="Has≈Ço">
    <button onclick="login()">Zaloguj</button>
  </div>
  <p id="komunikat"></p>

  <script>
    const API_URL = "https://script.google.com/macros/s/AKfycbz7cdTq1i7SnZBm_u6PelvUif-GKgsRNzfJWWesL3X6O7hGTiDo-UUt7dXSscMcQnKo/exec";

    async function login() {
      const num = document.getElementById("numer").value.trim();
      const pass = document.getElementById("haslo").value.trim();
      const info = document.getElementById("komunikat");

      if (!num || !pass) {
        info.textContent = "‚ö†Ô∏è Wpisz numer i has≈Ço";
        return;
      }

      info.textContent = "‚è≥ Trwa logowanie...";

      try {
        const res = await fetch(`${API_URL}?action=login&numer=${num}&haslo=${pass}`);
        const data = await res.json();
        console.log('üì°', data);
        if (data.success) {
          info.textContent = `‚úÖ ${data.message} (${data.group})`;
        } else {
          info.textContent = `‚ùå ${data.message}`;
        }
      } catch (err) {
        info.textContent = `‚ö†Ô∏è B≈ÇƒÖd po≈ÇƒÖczenia: ${err.message}`;
      }
    }
  </script>

</body>
</html>
